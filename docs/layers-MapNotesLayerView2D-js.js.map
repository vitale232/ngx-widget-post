{"version":3,"sources":["./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAC2qB,uBAAuB,UAAU,UAAU,YAAY,EAAE,oBAAoB,yEAAC,CAAC,6DAAC,GAAG,4BAA4B,wIAAwI,iBAAiB,6DAAC,+FAA+F,6DAAC,yDAAyD,mBAAmB,8BAA8B,mDAAmD,6BAA6B,MAAM,+CAA+C,6DAAC,2CAA2C,uDAAuD,qEAAqE,SAAS,YAAY,GAAG,uDAAuD,aAAa,MAAM,yCAAyC,oDAAC,uFAAuF,4DAAC,iGAAiG,sDAAsD,OAAO,YAAY,2DAA2D,UAAU,uDAAuD,SAAS,MAAM,iFAAiF,sDAAsD,gDAAgD,8CAA8C,YAAY,oEAAC,EAAE,qEAAqE,EAAE,oJAAoJ,KAAK,0HAA0H,oEAAC,EAAE,0CAA0C,IAAI,mHAAmH,uBAAuB,SAAS,6EAA6E,4EAA4E,sEAAsE,aAAa,WAAW,aAAa,mDAAmD,aAAa,2DAA2D,WAAW,EAAE,8DAAC,EAAE,6FAAC,iDAAiD,QAAuB,gEAAC,EAAC","file":"layers-MapNotesLayerView2D-js.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{isSome as r}from\"../../../core/maybe.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import t from\"../../../core/Collection.js\";import s from\"../../../Graphic.js\";import a from\"../../layers/LayerView.js\";import o from\"./graphics/GraphicsView2D.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";const l=Object.freeze({remove(){},pause(){},resume(){}});let c=class extends(p(a)){async fetchPopupFeatures(e){return(await Promise.all(Array.from(this.graphicsViews(),(r=>r.searchFeatures(e).then((e=>e.filter((e=>!!e.popupTemplate)))))))).flat()}*graphicsViews(){r(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():r(this._graphicsViews)?yield*this._graphicsViews:yield*[]}async hitTest(e,i){if(this.suspended)return null;const t=Array.from(this.graphicsViews(),(async t=>{const s=await t.hitTest(e,i);if(s){if(s.layer=this.layer,s.sourceLayer=this.layer,r(this._graphicsViewsFeatureCollectionMap)){const e=this._graphicsViewsFeatureCollectionMap.get(t);!s.popupTemplate&&e.popupTemplate&&(s.popupTemplate=e.popupTemplate)}return s}return null}));return(await Promise.all(t)).filter((e=>!!e))[0]||null}highlight(e){let r;if(\"number\"==typeof e?r=[e]:e instanceof s?r=[e.uid]:Array.isArray(e)&&e.length>0?r=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):t.isCollection(e)&&(r=e.map((e=>e&&e.uid)).toArray()),r=r.filter((e=>null!=e)),!r.length)return l;for(const e of this.graphicsViews())e.addHighlight(r);return{remove:()=>{for(const e of this.graphicsViews())e.removeHighlight(r)}}}update(e){for(const r of this.graphicsViews())r.processUpdate(e)}attach(){var e;const r=this.view,i=()=>this.requestUpdate(),t=()=>this.notifyChange(\"updating\");if(null!=(e=this.layer.featureCollections)&&e.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const e of this.layer.featureCollections){const s=new o({view:r,graphics:e.source,renderer:e.renderer,requestUpdateCallback:i});this._graphicsViewsFeatureCollectionMap.set(s,e),this.container.addChild(s.container),this.handles.add(s.watch(\"updating\",t),\"layerview-updating\")}}else{const e=[this.layer.polygonGraphics,this.layer.lineGraphics,this.layer.pointGraphics,this.layer.textGraphics].map((e=>new o({view:r,graphics:e,requestUpdateCallback:i})));for(const r of e)this.handles.add(r.watch(\"updating\",t),\"layerview-updating\"),this.container.addChild(r.container);this._graphicsViews=e}}detach(){this.container.removeAllChildren(),this.handles.remove(\"layerview-updating\");for(const e of this.graphicsViews())e.destroy(),e.view=null,e.renderer=null;this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}};c=e([i(\"esri.views.2d.layers.MapNotesLayerView2D\")],c);var n=c;export default n;\n"],"sourceRoot":"webpack:///"}