{"version":3,"sources":["./node_modules/@arcgis/core/layers/support/SceneModification.js","./node_modules/@arcgis/core/layers/support/SceneModifications.js","./node_modules/@arcgis/core/core/accessorSupport/decorators/persistable.js","./node_modules/@arcgis/core/layers/IntegratedMeshLayer.js"],"names":[],"mappings":"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","file":"IntegratedMeshLayer-js.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{clone as r}from\"../../core/lang.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import t from\"../../core/Warning.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import{persistable as i}from\"../../core/accessorSupport/decorators/persistable.js\";import{JSONSupport as a}from\"../../core/JSONSupport.js\";import c from\"../../geometry/Polygon.js\";import\"../../geometry.js\";import{canProjectWithoutEngine as m,projectPolygon as n}from\"../../geometry/projection.js\";var l;let y=l=class extends a{constructor(e){super(e),this.geometry=null,this.type=\"clip\"}writeGeometry(e,r,o,s){if(s.layer&&s.layer.spatialReference&&!s.layer.spatialReference.equals(this.geometry.spatialReference)){if(!m(e.spatialReference,s.layer.spatialReference))return void(s&&s.messages&&s.messages.push(new t(\"scenemodification:unsupported\",\"Scene modifications with incompatible spatial references are not supported\",{modification:this,spatialReference:s.layer.spatialReference,context:s})));const p=new c;n(e,p,s.layer.spatialReference),r[o]=p.toJSON(s)}else r[o]=e.toJSON(s);delete r[o].spatialReference}clone(){return new l({geometry:r(this.geometry),type:this.type})}};e([o({type:c}),i()],y.prototype,\"geometry\",void 0),e([p([\"web-scene\",\"portal-item\"],\"geometry\")],y.prototype,\"writeGeometry\",null),e([o({type:[\"clip\",\"mask\",\"replace\"],nonNullable:!0}),i()],y.prototype,\"type\",void 0),y=l=e([s(\"esri.layers.support.SceneModification\")],y);var f=y;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as o}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import{urlToObject as s}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupportMixin as i}from\"../../core/JSONSupport.js\";import c from\"../../core/Collection.js\";import p from\"../../request.js\";import a from\"./SceneModification.js\";var m;let n=m=class extends(i(c.ofType(a))){constructor(r){super(r),this.url=null}toJSON(r){return this.toArray().map((o=>o.toJSON(r))).filter((r=>!!r.geometry))}clone(){return new m({url:this.url,items:this.items.map((r=>r.clone()))})}_readModifications(r,o){for(const t of r)this.add(a.fromJSON(t,o))}static fromJSON(r,o){const t=new m;return t._readModifications(r,o),t}static async fromUrl(r,t,e){const i={url:s(r),origin:\"service\"},c=await p(r,{responseType:\"json\",signal:o(e,\"signal\")}),n=t.toJSON(),u=[];for(const r of c.data)u.push(a.fromJSON({...r,geometry:{...r.geometry,spatialReference:n}},i));return new m({url:r,items:u})}};r([t({type:String})],n.prototype,\"url\",void 0),n=m=r([e(\"esri.layers.support.SceneModifications\")],n);var u=n;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as r,get as e}from\"../../maybe.js\";import{getOwnPropertyMetadata as o}from\"../metadata.js\";import{propertyJSONMeta as i}from\"./property.js\";import{isMultiOriginJSONMixin as n}from\"../../multiOriginJSONSupportUtils.js\";import{isAbsolute as s,isBlobProtocol as u,join as p,getPathExtension as a}from\"../../urlUtils.js\";import{generateUUID as c}from\"../../uuid.js\";import{nameToId as l}from\"../PropertyOrigin.js\";import{getResourceContentExtension as f}from\"../../../portal/support/resourceExtension.js\";import{r as m,t as y,i as h,p as d}from\"../../../chunks/persistableUrlUtils.js\";function g(e){const p=t(e)&&e.origins?e.origins:[void 0];return(c,g)=>{const j=function(e,i,p){if(t(e)&&\"resource\"===e.type)return function(e,i,p){const c=o(i,p);return{type:String,read:(t,r,e)=>{const o=m(t,r,e);return c.type===String?o:\"function\"==typeof c.type?new c.type({url:o}):void 0},write:{writer(o,i,m,d){if(!d||!d.resources)return\"string\"==typeof o?void(i[m]=y(o,d)):void(i[m]=o.write({},d));const g=function(t){if(r(t))return null;if(\"string\"==typeof t)return t;return t.url}(o),j=g?y(g,{...d,verifyItemRelativeUrls:d&&d.verifyItemRelativeUrls?{writtenUrls:d.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null}):null,I=c.type!==String&&(!n(this)||d&&d.origin&&this.originIdOf(p)>l(d.origin));d&&d.portalItem&&t(j)&&!s(j)?I?function(t,r,e,o,i,n,s,u){const p=s.portalItem.resourceFromPath(o),c=U(e,o,s),l=f(c),m=a(p.path);if(l!==m)return void v(t,r,e,o,i,n,s,u);w(t,r,p,c,s.resources.toUpdate),i[n]=o}(this,p,o,j,i,m,d,e):function(t,r,e,o){o.resources.toKeep.push({resource:o.portalItem.resourceFromPath(t)}),r[e]=t}(j,i,m,d):d&&d.portalItem&&(r(j)||t(h(j))||u(j)||I)?v(this,p,o,j,i,m,d,e):i[m]=j}}}}(e,i,p);switch(t(e)&&e.type?e.type:\"other\"){case\"other\":return{read:!0,write:!0};case\"url\":{const{read:t,write:r}=d;return{read:t,write:r}}}}(e,c,g);for(const t of p){const r=i(c,t,g);for(const t in j)r[t]=j[t]}}}function v(t,r,o,i,n,s,a,l){const m=c(),y=U(o,i,a),h=p(e(l,\"prefix\"),m),d=`${h}.${f(y)}`,g=a.portalItem.resourceFromPath(d);u(i)&&a.resources.pendingOperations.push(async function(t){const r=(await import(\"../../../request.js\")).default,{data:e}=await r(t,{responseType:\"blob\"});return e}(i).then((t=>{g.path=`${h}.${f(t)}`,n[s]=g.itemRelativeUrl})).catch((()=>{}))),w(t,r,g,y,a.resources.toAdd),n[s]=g.itemRelativeUrl}function w(t,r,e,o,i){i.push({resource:e,content:o,finish:e=>{!function(t,r,e){\"string\"==typeof t[r]?t[r]=e.url:t[r].url=e.url}(t,r,e)}})}function U(t,r,e){return\"string\"==typeof t?{url:r}:new Blob([JSON.stringify(t.toJSON(e))],{type:\"application/json\"})}export{g as persistable};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{get as t,isSome as o,isNone as r}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as i}from\"../core/accessorSupport/decorators/property.js\";import{reader as s}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"../core/Error.js\";import{f as p}from\"../chunks/persistableUrlUtils.js\";import{persistable as d}from\"../core/accessorSupport/decorators/persistable.js\";import y from\"../core/Handles.js\";import c from\"./Layer.js\";import{MultiOriginJSONMixin as m}from\"../core/MultiOriginJSONSupport.js\";import{on as l}from\"../core/watchUtils.js\";import{elevationInfo as h}from\"./support/commonProperties.js\";import{OperationalLayer as f}from\"./mixins/OperationalLayer.js\";import{ArcGISService as u}from\"./mixins/ArcGISService.js\";import{PortalLayer as v}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as g}from\"./mixins/ScaleRangeLayer.js\";import{I3SNodePageDefinition as S,I3SMaterialDefinition as j,I3STextureSetDefinition as w,I3SGeometryDefinition as T}from\"./support/I3SLayerDefinitions.js\";import{SceneService as L}from\"./mixins/SceneService.js\";import _ from\"./support/SceneModifications.js\";let x=class extends(L(u(f(v(g(m(c))))))){constructor(...e){super(...e),this.handles=new y,this.geometryType=\"mesh\",this.operationalLayerType=\"IntegratedMeshLayer\",this.type=\"integrated-mesh\",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile=\"mesh-pyramids\",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this.handles.destroy()}initialize(){this.handles.add(l(this,\"modifications\",\"after-changes\",(()=>this.modifications=this.modifications),null,null,!0))}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}readModifications(e,t,o){this._modificationsSource={url:p(e,o),context:o}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const r=t(e,\"signal\");try{await this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e)}catch(e){}if(await this._fetchService(r),o(this._modificationsSource)){const t=await _.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin(\"modifications\",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this._verifyRootNodeAndUpdateExtent(this.nodePages,r)}beforeSave(){if(!r(this._modificationsSource))return this.load().then((()=>{}),(()=>{}))}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"integrated-mesh\"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"integrated-mesh\"};return this._debouncedSaveOperations(0,e)}validateLayer(e){if(e.layerType&&\"IntegratedMesh\"!==e.layerType)throw new n(\"integrated-mesh-layer:layer-type-not-supported\",\"IntegratedMeshLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new n(\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"});if(this.version.major>1)throw new n(\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"})}_getTypeKeywords(){return[\"IntegratedMeshLayer\"]}};e([i({type:String,readOnly:!0})],x.prototype,\"geometryType\",void 0),e([i({type:[\"show\",\"hide\"]})],x.prototype,\"listMode\",void 0),e([i({type:[\"IntegratedMeshLayer\"]})],x.prototype,\"operationalLayerType\",void 0),e([i({json:{read:!1},readOnly:!0})],x.prototype,\"type\",void 0),e([i({type:S,readOnly:!0})],x.prototype,\"nodePages\",void 0),e([i({type:[j],readOnly:!0})],x.prototype,\"materialDefinitions\",void 0),e([i({type:[w],readOnly:!0})],x.prototype,\"textureSetDefinitions\",void 0),e([i({type:[T],readOnly:!0})],x.prototype,\"geometryDefinitions\",void 0),e([i({readOnly:!0})],x.prototype,\"serviceUpdateTimeStamp\",void 0),e([i({type:_}),d({origins:[\"web-scene\",\"portal-item\"],type:\"resource\",prefix:\"modifications\"})],x.prototype,\"modifications\",void 0),e([s([\"web-scene\",\"portal-item\"],\"modifications\")],x.prototype,\"readModifications\",null),e([i(h)],x.prototype,\"elevationInfo\",void 0),e([i({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0},\"portal-item\":{read:!0,write:!0}},read:!1}})],x.prototype,\"path\",void 0),x=e([a(\"esri.layers.IntegratedMeshLayer\")],x);var O=x;export default O;\n"],"sourceRoot":"webpack:///"}