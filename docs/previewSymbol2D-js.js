(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["previewSymbol2D-js"],{

/***/ "YKPD":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/previewSymbol2D.js ***!
  \**********************************************************************/
/*! exports provided: previewSymbol2D */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "previewSymbol2D", function() { return p; });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "zlDU");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "9MzC");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/screenUtils.js */ "qRWG");
/* harmony import */ var _gfxUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gfxUtils.js */ "zdBc");
/* harmony import */ var _previewUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./previewUtils.js */ "IAPW");
/* harmony import */ var _renderUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./renderUtils.js */ "S60b");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.18/esri/copyright.txt for details.
*/
const u=document.createElement("canvas");function p(p,h){const d=null!=(null==h?void 0:h.size)?Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__["pt2px"])(h.size):null,f=null!=(null==h?void 0:h.maxSize)?Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__["pt2px"])(h.maxSize):null,v=null!=(null==h?void 0:h.opacity)?h.opacity:null,y=null!=(null==h?void 0:h.rotation)?h.rotation:null,g=Object(_gfxUtils_js__WEBPACK_IMPORTED_MODULE_3__["getStroke"])(p),M={shape:null,fill:null,stroke:g,offset:[0,0]};null!=g&&g.width&&(g.width=Math.min(g.width,80));const w=(null==g?void 0:g.width)||0;let b=null!=d&&(null==(null==h?void 0:h.scale)||(null==h?void 0:h.scale)),x=0,k=0;switch(p.type){case"simple-marker":{const e=p.style,t=Math.min(null!=d?d:Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__["pt2px"])(p.size),f||120);switch(x=t,k=t,e){case"circle":M.shape={type:"circle",cx:0,cy:0,r:.5*t},b||(x+=w,k+=w);break;case"cross":M.shape={type:"path",path:[{command:"M",values:[0,.5*k]},{command:"L",values:[x,.5*k]},{command:"M",values:[.5*x,0]},{command:"L",values:[.5*x,k]}]};break;case"diamond":M.shape={type:"path",path:[{command:"M",values:[0,.5*k]},{command:"L",values:[.5*x,0]},{command:"L",values:[x,.5*k]},{command:"L",values:[.5*x,k]},{command:"Z",values:[]}]},b||(x+=w,k+=w);break;case"square":M.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,0]},{command:"L",values:[x,k]},{command:"L",values:[0,k]},{command:"Z",values:[]}]},b||(x+=w,k+=w);break;case"triangle":M.shape={type:"path",path:[{command:"M",values:[.5*x,0]},{command:"L",values:[x,k]},{command:"L",values:[0,k]},{command:"Z",values:[]}]},b||(x+=w,k+=w);break;case"x":M.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[x,k]},{command:"M",values:[x,0]},{command:"L",values:[0,k]}]};break;case"path":M.shape={type:"path",path:p.path||""},b||(x+=w,k+=w),b=!0}break}case"simple-line":{const e=Math.min(null!=d?d:w,f||80),t=e>22?2*e:40;g.width=e,x=t,k=e,M.shape={type:"path",path:[{command:"M",values:[0,k]},{command:"L",values:[x,k]}]};break}case"picture-fill":case"simple-fill":x=Math.min(null!=d?d:22,f||120)+w,k=x,b=!0,M.shape="object"==typeof(null==h?void 0:h.symbolConfig)&&null!=h&&h.symbolConfig.isSquareFill?_previewUtils_js__WEBPACK_IMPORTED_MODULE_4__["shapes"].squareFill[0]:_previewUtils_js__WEBPACK_IMPORTED_MODULE_4__["shapes"].fill[0];break;case"picture-marker":{let e=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__["pt2px"])(p.width),t=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__["pt2px"])(p.height);const a=Math.max(e,t),n=e/t;e=n<=1?Math.ceil(a*n):a,t=n<=1?a:Math.ceil(a/n),x=Math.min(null!=d?d:e,f||120),k=Math.min(null!=d?d:t,f||120),M.shape={type:"image",x:-Math.round(x/2),y:-Math.round(k/2),width:x,height:k,src:p.url||""};break}case"text":{const e=p,t=e.text||"Aa",a=e.font,s=Math.min(null!=d?d:Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__["pt2px"])(a.size),f||120),o=function(e,t){const a=u.getContext("2d"),l=[];return t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+"px"),t.family&&l.push(t.family)),a.font=l.join(" "),a.measureText(e).width}(t,{weight:a.weight,size:s,family:a.family}),i=/[\uE600-\uE6FF]/.test(t);x=i?s:o,k=s;let r=.25*function(e){if(0===e.length)return 0;if(e.length>2){const t=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__["px2pt"])(1),a=parseFloat(e);switch(e.slice(-2)){case"px":return a;case"pt":return a*t;case"in":return 72*a*t;case"pc":return 12*a*t;case"mm":return 2.8346456692913384*a*t;case"cm":return 28.346456692913385*a*t}}return parseFloat(e)}((a?s:0).toString());i&&(r+=5),M.shape={type:"text",text:t,x:0,y:r,align:"middle",decoration:a&&a.decoration,rotated:e.rotated,kerning:e.kerning},M.font=a&&{size:s,style:a.style,decoration:a.decoration,weight:a.weight,family:a.family};break}}if(!M.shape)return Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__["reject"])(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("symbolPreview: renderPreviewHTML2D","symbol not supported."));const L=Object(_gfxUtils_js__WEBPACK_IMPORTED_MODULE_3__["getFill"])(p),z=L,j=p.color;let C=null;return z&&"pattern"===z.type&&j&&"picture-fill"!==p.type?C=Object(_gfxUtils_js__WEBPACK_IMPORTED_MODULE_3__["getPatternUrlWithColor"])(z.src,j.toCss(!0)).then((e=>(z.src=e,M.fill=z,M))):(M.fill=L,C=Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__["resolve"])(M)),C.then((e=>{const t=[[e]];if("object"==typeof(null==h?void 0:h.symbolConfig)&&null!=h&&h.symbolConfig.applyColorModulation){const a=.6*x;t.unshift([{...e,offset:[-a,0],fill:Object(_previewUtils_js__WEBPACK_IMPORTED_MODULE_4__["adjustColorBrightness"])(L,-.3)}]),t.push([{...e,offset:[a,0],fill:Object(_previewUtils_js__WEBPACK_IMPORTED_MODULE_4__["adjustColorBrightness"])(L,.3)}]),x+=2*a}return Object(_renderUtils_js__WEBPACK_IMPORTED_MODULE_5__["renderSymbol"])(t,[x,k],{node:h&&h.node,scale:b,opacity:v,rotation:y})}))}


/***/ })

}]);
//# sourceMappingURL=previewSymbol2D-js.js.map